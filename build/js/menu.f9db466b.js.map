{"version":3,"sources":["scripts/menu.js"],"names":["btnMenuToggle","document","querySelector","menu","header","main","nav","catalog","btnMobSubMenu","btnCatDesktOpener","closeMenu","event","target","classList","remove","body","style","overflow","removeEventListener","addEventListener","openMenu","once","window","innerWidth","add","scrollTo","top","left","behavior","height","setTimeout","onclick","toggle"],"mappings":";AAAA,IAAMA,EAAgBC,SAASC,cAAc,sBACvCC,EAAOF,SAASC,cAAc,iBAC9BE,EAASH,SAASC,cAAc,WAChCG,EAAOJ,SAASC,cAAc,SAC9BI,EAAML,SAASC,cAAc,gBAC7BK,EAAUN,SAASC,cAAc,yBACjCM,EAAgBP,SAASC,cAAc,2BACvCO,EAAoBR,SAASC,cAAc,oBAGjD,SAASQ,EAAUC,GAEXA,EAAMC,SAAWJ,IAEjBL,EAAKU,UAAUC,OAAO,uBACtBP,EAAQM,UAAUC,OAAO,gCACzBR,EAAIO,UAAUC,OAAO,wBACrBP,EAAQM,UAAUC,OAAO,wCACzBd,EAAca,UAAUC,OAAO,2BAG/Bb,SAASc,KAAKC,MAAMC,SAAW,UAI/BhB,SAASiB,oBAAoB,QAASR,GACtCD,EAAkBU,iBAAiB,QAASC,EAAU,CAAEC,MAAM,KAItE,SAASD,IACDE,OAAOC,WAAa,KAEpBpB,EAAKU,UAAUW,IAAI,uBAMnBF,OAAOG,SAAS,CAAEC,IAAK,EAAGC,KAAM,EAAGC,SAAU,WAG7C3B,SAASc,KAAKC,MAAMC,SAAW,SAC/BhB,SAASc,KAAKC,MAAMa,OAAS,QAG7BvB,EAAIO,UAAUW,IAAI,0BAElBjB,EAAQM,UAAUW,IAAI,wCACtBxB,EAAca,UAAUW,IAAI,4BAIhCM,WAAW,WACP7B,SAASkB,iBAAiB,QAAST,IACpC,IAMPF,EAAcuB,QAAU,WACpBxB,EAAQM,UAAUmB,OAAO,iCAG7BvB,EAAkBU,iBAAiB,QAASC,EAAU,CAAEC,MAAM","file":"menu.f9db466b.js","sourceRoot":"../../assets/src","sourcesContent":["const btnMenuToggle = document.querySelector('.header__icon-menu');\nconst menu = document.querySelector('.header__menu');\nconst header = document.querySelector('.header');\nconst main = document.querySelector('.main');\nconst nav = document.querySelector('.header__nav');\nconst catalog = document.querySelector('.header__catalog-menu');\nconst btnMobSubMenu = document.querySelector('.header__submenu-opener');\nconst btnCatDesktOpener = document.querySelector('.header__catalog')\n\n\nfunction closeMenu(event) {\n    //  объединил закрытие мобильного и десктоп меню в одну функцию без условий по ширине экрана - закрывает ВСË.\n    if (event.target !== btnMobSubMenu) {\n        // console.log('document.addEventListener click');\n        menu.classList.remove('header__menu_mobile');\n        catalog.classList.remove('header__catalog-menu_visible');\n        nav.classList.remove('header__nav_mob-menu');\n        catalog.classList.remove('header__catalog-menu_visible-desktop');\n        btnMenuToggle.classList.remove('header__icon-menu_close');\n\n        // возобновляем возможность прокрутки страницы при закрытии меню\n        document.body.style.overflow = 'visible';\n\n        // main.style.filter = 'none';\n\n        document.removeEventListener('click', closeMenu);\n        btnCatDesktOpener.addEventListener('click', openMenu, { once: true });\n    }\n}\n\nfunction openMenu() {\n    if (window.innerWidth < 768) {\n        // console.log('btnMenuToggle.onclick');\n        menu.classList.add('header__menu_mobile');\n\n        // btnMenuToggle.removeEventListener('click', openMenu); не надо убирать т.к листнер вешался с { once: true }\n\n        // перематывем страницу вверх (к меню) - на случай если меню откроют когда иконка меню уже  частично скрыта перемоткой\n        // window.scrollTo(0, 0);\n        window.scrollTo({ top: 0, left: 0, behavior: 'smooth' });\n        // запрещаем прокрутку страницы при открытии меню\n        // на iPhone всё равно можно прокрутить страницу - выглядит очень странно. - Делаем непрозрачный фиксированный фон в цвет и добавляем лого, дублируя HTML\n        document.body.style.overflow = 'hidden';\n        document.body.style.height = '100vh';\n        // main.style.filter = 'contrast(0.01)';\n\n        nav.classList.add('header__nav_mob-menu');\n    } else {\n        catalog.classList.add('header__catalog-menu_visible-desktop');\n        btnMenuToggle.classList.add('header__icon-menu_close');\n    }\n\n    // вешаем листнер закрытия с задержкой т.к. если не сделать задержку листнер закрытия мгновенно повесится на документ и обработается клик который его же и повесил - меню откроется и закроется мгновенно - т.е. не откроется вообще\n    setTimeout(() => {\n        document.addEventListener('click', closeMenu);\n    }, 16);\n}\n\n// повесили этот листнер на btnCatDesktOpener\n// btnMenuToggle.addEventListener('click', openMenu, { once: true });\n\nbtnMobSubMenu.onclick = () => {\n    catalog.classList.toggle('header__catalog-menu_visible');\n}\n\nbtnCatDesktOpener.addEventListener('click', openMenu, { once: true });\n\n\n// повесить отдельный дублирующий листнер закрытия мобильного меню на кнопку закрытия моб.меню - на всякий случай  - не надо т.к. функция closeMenu закрывает ВСЕ меню - и мобильное и десктопное\n\n\n\n\n// Если зарегистрировано несколько одинаковых EventListener-ов на одном EventTarget с одинаковыми параметрами, дублирующиеся слушатели игнорируются. Они не позволяют EventListener-у быть вызванным дважды, и так как одинаковые слушатели игнорируются, не требуется удалять их вручную с помощью метода removeEventListener. \n// То есть список разрастается потихоньку, что, конечно, не очень то хорошо, но события повторно не вызываются.\n// https://developer.mozilla.org/ru/docs/Web/API/EventTarget/addEventListener"]}