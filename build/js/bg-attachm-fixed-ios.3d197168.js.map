{"version":3,"sources":["scripts/bg-attachm-fixed-ios.js"],"names":["scrolledY","offset","ordering","document","querySelector","fixBgtoScreen","scrollY","orderingOffset","offsetTop","window","innerWidth","style","backgroundPosition","Math","max","observerFixBg","IntersectionObserver","entries","isIntersecting","onscroll","undefined","observe"],"mappings":";AAAA,IACIA,EACAC,EAFEC,EAAWC,SAASC,cAAc,aAKxC,SAASC,IACLL,EAAYM,QACZC,eAAiBL,EAASM,UAUtBC,OAAOC,YAAc,IACrBR,EAASS,MAAMC,mBAAqB,WAAaZ,EAAYO,eAAiBM,KAAKC,IAAK,IAAML,OAAOC,WAAa,MAAQ,KAK1HR,EAASS,MAAMC,mBAAqB,WAAaZ,EAAYO,eAAkB,IAAME,OAAOC,YAAe,KAWnH,IAAMK,EAAgB,IAAIC,qBACtB,SAAUC,GACFA,EAAQ,GAAGC,eAEXT,OAAOU,SAAWd,EAGlBI,OAAOU,cAAWC,IAM9BL,EAAcM,QAAQnB","file":"bg-attachm-fixed-ios.3d197168.js","sourceRoot":"../../assets/src","sourcesContent":["const ordering = document.querySelector('.ordering');\nlet scrolledY;\nlet offset;\n\n// скрипт тормозит на iPhone 6s, 11Pro и даже (немного) на MacBook Pro 2015\nfunction fixBgtoScreen() {\n    scrolledY = scrollY;\n    orderingOffset = ordering.offsetTop; // .offsetTop - расстояние в пикселях от элемента до верхней границы его родителя (т.е. расстояние от .ordering до начала body (т.е. страницы) )\n    // console.log(scrolledY);\n    // console.log(scrollY);\n    // console.log(orderingOffset);\n\n    // чисто для примерки\n    // ordering.style.backgroundPosition = 'center ' + (scrolledY - 1850) + 'px';\n    // console.log(scrolledY - 1850);\n    // 1850 - вручную подобранный коэфф. смещения - по факту это расстояние от начала (верха) страницы до .ordering\n\n    if (window.innerWidth >= 768) {\n        ordering.style.backgroundPosition = 'center ' + (scrolledY - orderingOffset - Math.max((312 / window.innerWidth), 312)) + 'px';\n        // console.log(scrolledY - orderingOffset);\n        // 312 - коэфф для красивого отображения (подобран, т.к. JS даёт нам scrolledYи orderingOffset в пикселях. 1200 - ширина wrapper-a). т.е. тоже что и 26% в CSS для десктопа 312/1200 = 26%\n\n    } else {\n        ordering.style.backgroundPosition = 'center ' + (scrolledY - orderingOffset - (612 / window.innerWidth)) + 'px';\n    }\n    // ordering.style.backgroundPosition = `center calc(${(scrolledY - orderingOffset)}px - 26%)`; - в инлайновых стилях (которые создаёт JS) не работает CSS функция calc() - рассчитываем (выше) через JS )\n\n}\n\n// ordering.style.backgroundPosition = 'center ' + (scrolledY - orderingOffset - 314) + 'px';\n\n\n// window.addEventListener('scroll', fixBgtoScreen)\n\nconst observerFixBg = new IntersectionObserver(\n    function (entries) {\n        if (entries[0].isIntersecting) {\n            // window.addEventListener('scroll', fixBgtoScreen)\n            window.onscroll = fixBgtoScreen;\n        } else {\n            // window.removeEventListener('scroll', fixBgtoScreen)\n            window.onscroll = undefined;\n        }\n\n    }\n)\n\nobserverFixBg.observe(ordering);"]}