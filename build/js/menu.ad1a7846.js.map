{"version":3,"sources":["scripts/menu.js"],"names":["btnMenuToggle","document","querySelector","menu","header","nav","catalog","btnMobSubMenu","btnCatDesktOpener","closeMenu","event","window","innerWidth","target","classList","remove","removeEventListener","addEventListener","openMenu","once","body","style","overflow","add","setTimeout","scrollTo","top","left","behavior","height","onclick","toggle"],"mappings":";AAAA,IAAMA,EAAgBC,SAASC,cAAc,sBACvCC,EAAOF,SAASC,cAAc,iBAC9BE,EAASH,SAASC,cAAc,WAChCG,EAAMJ,SAASC,cAAc,gBAC7BI,EAAUL,SAASC,cAAc,yBACjCK,EAAgBN,SAASC,cAAc,2BACvCM,EAAoBP,SAASC,cAAc,oBAGjD,SAASO,EAAUC,GACXC,OAAOC,WAAa,IAEhBF,EAAMG,SAAWN,IAEjBJ,EAAKW,UAAUC,OAAO,uBACtBT,EAAQQ,UAAUC,OAAO,gCACzBd,SAASe,oBAAoB,QAASP,GACtCD,EAAkBS,iBAAiB,QAASC,EAAU,CAAEC,MAAM,IAG9DlB,SAASmB,KAAKC,MAAMC,SAAW,UAE/BjB,EAAIS,UAAUC,OAAO,0BAGzBT,EAAQQ,UAAUC,OAAO,wCACzBd,SAASe,oBAAoB,QAASP,GACtCD,EAAkBS,iBAAiB,QAASC,EAAU,CAAEC,MAAM,KAItE,SAASD,IACDP,OAAOC,WAAa,KAEpBT,EAAKW,UAAUS,IAAI,uBAKnBC,WAAW,WACPvB,SAASgB,iBAAiB,QAASR,IACpC,IAIHE,OAAOc,SAAS,CAAEC,IAAK,EAAGC,KAAM,EAAGC,SAAU,WAG7C3B,SAASmB,KAAKC,MAAMC,SAAW,SAC/BrB,SAASmB,KAAKC,MAAMQ,OAAS,QAE7BxB,EAAIS,UAAUS,IAAI,0BAElBjB,EAAQQ,UAAUS,IAAI,wCACtBC,WAAW,WACPvB,SAASgB,iBAAiB,QAASR,IACpC,KAWXF,EAAcuB,QAAU,WACpBxB,EAAQQ,UAAUiB,OAAO,iCAG7BvB,EAAkBS,iBAAiB,QAASC,EAAU,CAAEC,MAAM","file":"menu.ad1a7846.js","sourceRoot":"../../assets/src","sourcesContent":["const btnMenuToggle = document.querySelector('.header__icon-menu');\nconst menu = document.querySelector('.header__menu');\nconst header = document.querySelector('.header');\nconst nav = document.querySelector('.header__nav');\nconst catalog = document.querySelector('.header__catalog-menu');\nconst btnMobSubMenu = document.querySelector('.header__submenu-opener');\nconst btnCatDesktOpener = document.querySelector('.header__catalog')\n\n\nfunction closeMenu(event) {\n    if (window.innerWidth < 768) {\n        // if (event.target !== menu ) {\n        if (event.target !== btnMobSubMenu) {\n            // console.log('document.addEventListener click');\n            menu.classList.remove('header__menu_mobile');\n            catalog.classList.remove('header__catalog-menu_visible');\n            document.removeEventListener('click', closeMenu);\n            btnCatDesktOpener.addEventListener('click', openMenu, { once: true });\n\n            // возобновляем возможность прокрутки страницы при закрытии меню\n            document.body.style.overflow = 'visible';\n\n            nav.classList.remove('header__nav_mob-menu');\n        }\n    } else {\n        catalog.classList.remove('header__catalog-menu_visible-desktop');\n        document.removeEventListener('click', closeMenu);\n        btnCatDesktOpener.addEventListener('click', openMenu, { once: true });\n    }\n}\n\nfunction openMenu() {\n    if (window.innerWidth < 768) {\n        // console.log('btnMenuToggle.onclick');\n        menu.classList.add('header__menu_mobile');\n\n        // btnMenuToggle.removeEventListener('click', openMenu); не надо убирать т.к листнер вешался с { once: true }\n\n        // вешаем листнер закрытия с задержкой т.к. если не сделать задержку листнер закрытия мгновенно повесится на документ и обработается клик который его же и повесил - меню откроется и закроется мгновенно - т.е. не откроется вообще\n        setTimeout(() => {\n            document.addEventListener('click', closeMenu);\n        }, 16);\n\n        // перематывем страницу вверх (к меню) - на случай если меню откроют когда иконка меню уже  частично скрыта перемоткой\n        // window.scrollTo(0, 0);\n        window.scrollTo({ top: 0, left: 0, behavior: 'smooth' });\n        // запрещаем прокрутку страницы при открытии меню\n        // на iPhone всё равно можно прокрутить страницу - выглядит очень странно. - Делаем непрозрачный фиксированный фон в цвет  и добавляем лого, дублируя HTML\n        document.body.style.overflow = 'hidden';\n        document.body.style.height = '100vh';\n\n        nav.classList.add('header__nav_mob-menu');\n    } else {\n        catalog.classList.add('header__catalog-menu_visible-desktop');\n        setTimeout(() => {\n            document.addEventListener('click', closeMenu);\n        }, 16);\n    }\n}\n\n// повесили этот листнер на btnCatDesktOpener\n// btnMenuToggle.addEventListener('click', openMenu, { once: true });\n\n// btnMenuToggle.onclick = () => {\n//     btnMenuToggle.classList.toggle('header__icon-menu_close')\n// }\n\nbtnMobSubMenu.onclick = () => {\n    catalog.classList.toggle('header__catalog-menu_visible');\n}\n\nbtnCatDesktOpener.addEventListener('click', openMenu, { once: true });\n\n\n// повесить отдельный дублирующий листнер закрытия мобильного меню на кнопку закрытия моб.меню - на всякий случай\n\n\n\n\n// Если зарегистрировано несколько одинаковых EventListener-ов на одном EventTarget с одинаковыми параметрами, дублирующиеся слушатели игнорируются. Они не позволяют EventListener-у быть вызванным дважды, и так как одинаковые слушатели игнорируются, не требуется удалять их вручную с помощью метода removeEventListener. \n// То есть список разрастается потихоньку, что, конечно, не очень то хорошо, но события повторно не вызываются.\n// https://developer.mozilla.org/ru/docs/Web/API/EventTarget/addEventListener"]}